{"numTotalTestSuites":30,"numPassedTestSuites":29,"numFailedTestSuites":1,"numPendingTestSuites":0,"numTotalTests":64,"numPassedTests":1,"numFailedTests":63,"numPendingTests":0,"numTodoTests":0,"startTime":1750461226469,"success":false,"testResults":[{"assertionResults":[],"startTime":1750461226469,"endTime":1750461226469,"status":"failed","message":"[vitest] There was an error when mocking a module. If you are using \"vi.mock\" factory, make sure there are no top level variables inside, since this call is hoisted to top of the file. Read more: https://vitest.dev/api/vi.html#vi-mock","name":"/Users/tmita/workspace/vibeflow/tests/unit/auto-refactor-workflow.test.ts"},{"assertionResults":[{"ancestorTitles":["","CostManager","constructor"],"fullName":" CostManager constructor should initialize with project path","status":"failed","title":"should initialize with project path","duration":15,"failureMessages":["expected undefined to be '/tmp/test-project' // Object.is equality"],"location":{"line":27,"column":42}},{"ancestorTitles":["","CostManager","initialize"],"fullName":" CostManager initialize should create config directory if not exists","status":"passed","title":"should create config directory if not exists","duration":4,"failureMessages":[]},{"ancestorTitles":["","CostManager","initialize"],"fullName":" CostManager initialize should create default config if not exists","status":"failed","title":"should create default config if not exists","duration":14,"failureMessages":["expected \"writeFile\" to be called with arguments: [ …(2) ]\n\nReceived: \n\n  1st writeFile call:\n\n  Array [\n-   \"/tmp/test-project/.vibeflow/config.json\",\n-   StringContaining \"\\\"cost_limits\\\"\",\n+   \"/tmp/test-project/.vibeflow/cost-limits.json\",\n+   \"{\n+   \\\"daily\\\": 10,\n+   \\\"monthly\\\": 100,\n+   \\\"perRun\\\": 5\n+ }\",\n  ]\n\n\nNumber of calls: 1\n"],"location":{"line":52,"column":34}},{"ancestorTitles":["","CostManager","initialize"],"fullName":" CostManager initialize should load existing config if available","status":"failed","title":"should load existing config if available","duration":5,"failureMessages":["Cannot read properties of undefined (reading 'cost_limits')"],"location":{"line":77,"column":44}},{"ancestorTitles":["","CostManager","checkLimits"],"fullName":" CostManager checkLimits should allow operation within per-run limit","status":"failed","title":"should allow operation within per-run limit","duration":2,"failureMessages":["this.currentUsage.filter is not a function"],"location":{"line":81,"column":8}},{"ancestorTitles":["","CostManager","checkLimits"],"fullName":" CostManager checkLimits should reject operation exceeding per-run limit","status":"failed","title":"should reject operation exceeding per-run limit","duration":1,"failureMessages":["this.currentUsage.filter is not a function"],"location":{"line":81,"column":8}},{"ancestorTitles":["","CostManager","checkLimits"],"fullName":" CostManager checkLimits should reject operation exceeding daily limit","status":"failed","title":"should reject operation exceeding daily limit","duration":1,"failureMessages":["this.currentUsage.filter is not a function"],"location":{"line":81,"column":8}},{"ancestorTitles":["","CostManager","checkLimits"],"fullName":" CostManager checkLimits should reject operation exceeding monthly limit","status":"failed","title":"should reject operation exceeding monthly limit","duration":1,"failureMessages":["this.currentUsage.filter is not a function"],"location":{"line":81,"column":8}},{"ancestorTitles":["","CostManager","checkLimits"],"fullName":" CostManager checkLimits should calculate remaining budgets correctly","status":"failed","title":"should calculate remaining budgets correctly","duration":0,"failureMessages":["this.currentUsage.filter is not a function"],"location":{"line":81,"column":8}},{"ancestorTitles":["","CostManager","trackUsage"],"fullName":" CostManager trackUsage should track operation usage","status":"failed","title":"should track operation usage","duration":1,"failureMessages":["costManager.trackUsage is not a function"],"location":{"line":165,"column":25}},{"ancestorTitles":["","CostManager","trackUsage"],"fullName":" CostManager trackUsage should increment operation count","status":"failed","title":"should increment operation count","duration":20,"failureMessages":["costManager.trackUsage is not a function"],"location":{"line":177,"column":25}},{"ancestorTitles":["","CostManager","trackUsage"],"fullName":" CostManager trackUsage should update daily and monthly costs","status":"failed","title":"should update daily and monthly costs","duration":2,"failureMessages":["costManager.trackUsage is not a function"],"location":{"line":186,"column":25}},{"ancestorTitles":["","CostManager","trackUsage"],"fullName":" CostManager trackUsage should store operation metadata","status":"failed","title":"should store operation metadata","duration":1,"failureMessages":["costManager.trackUsage is not a function"],"location":{"line":204,"column":25}},{"ancestorTitles":["","CostManager","getUsageReport"],"fullName":" CostManager getUsageReport should return current usage statistics","status":"failed","title":"should return current usage statistics","duration":3,"failureMessages":["this.currentUsage.filter is not a function"],"location":{"line":158,"column":42}},{"ancestorTitles":["","CostManager","getUsageReport"],"fullName":" CostManager getUsageReport should return current limits","status":"failed","title":"should return current limits","duration":1,"failureMessages":["this.currentUsage.filter is not a function"],"location":{"line":158,"column":42}},{"ancestorTitles":["","CostManager","getUsageReport"],"fullName":" CostManager getUsageReport should calculate today operations from recent operations","status":"failed","title":"should calculate today operations from recent operations","duration":2,"failureMessages":["this.currentUsage.filter is not a function"],"location":{"line":158,"column":42}},{"ancestorTitles":["","CostManager","resetDailyUsage"],"fullName":" CostManager resetDailyUsage should reset daily usage","status":"failed","title":"should reset daily usage","duration":1,"failureMessages":["costManager.resetDailyUsage is not a function"],"location":{"line":296,"column":25}},{"ancestorTitles":["","CostManager","resetDailyUsage"],"fullName":" CostManager resetDailyUsage should preserve monthly usage","status":"failed","title":"should preserve monthly usage","duration":0,"failureMessages":["costManager.resetDailyUsage is not a function"],"location":{"line":305,"column":25}},{"ancestorTitles":["","CostManager","updateLimits"],"fullName":" CostManager updateLimits should update cost limits","status":"failed","title":"should update cost limits","duration":1,"failureMessages":["expected \"writeFile\" to be called with arguments: [ …(2) ]\n\nReceived: \n\n  1st writeFile call:\n\n  Array [\n-   \"/tmp/test-project/.vibeflow/config.json\",\n-   StringContaining \"\\\"per_run\\\":10\",\n+   \"/tmp/test-project/.vibeflow/cost-limits.json\",\n+   \"{\n+   \\\"daily\\\": 100,\n+   \\\"monthly\\\": 500,\n+   \\\"perRun\\\": 5,\n+   \\\"cost_limits\\\": {\n+     \\\"per_run\\\": 5,\n+     \\\"daily\\\": 50,\n+     \\\"monthly\\\": 200\n+   },\n+   \\\"usage_tracking\\\": {\n+     \\\"total_operations\\\": 0,\n+     \\\"total_cost\\\": 0\n+   },\n+   \\\"per_run\\\": 10\n+ }\",\n  ]\n\n\nNumber of calls: 1\n"],"location":{"line":337,"column":34}},{"ancestorTitles":["","CostManager","updateLimits"],"fullName":" CostManager updateLimits should validate limit values","status":"failed","title":"should validate limit values","duration":4,"failureMessages":["promise resolved \"undefined\" instead of rejecting"],"location":{"line":350,"column":59}},{"ancestorTitles":["","CostManager","updateLimits"],"fullName":" CostManager updateLimits should validate limit hierarchy","status":"failed","title":"should validate limit hierarchy","duration":2,"failureMessages":["promise resolved \"undefined\" instead of rejecting"],"location":{"line":361,"column":59}},{"ancestorTitles":["","CostManager","error handling"],"fullName":" CostManager error handling should handle file system errors gracefully","status":"failed","title":"should handle file system errors gracefully","duration":6,"failureMessages":["expected [Function] to throw error including 'Permission denied' but got 'Cannot create directory'"],"location":{"line":371,"column":7}},{"ancestorTitles":["","CostManager","error handling"],"fullName":" CostManager error handling should handle corrupted config files","status":"failed","title":"should handle corrupted config files","duration":2,"failureMessages":["expected \"writeFile\" to be called with arguments: [ Array(2) ]\n\nReceived: \n\n  1st writeFile call:\n\n  Array [\n-   StringContaining \"config.json\",\n-   StringContaining \"\\\"cost_limits\\\"\",\n+   \"/tmp/test-project/.vibeflow/cost-limits.json\",\n+   \"{\n+   \\\"daily\\\": 10,\n+   \\\"monthly\\\": 100,\n+   \\\"perRun\\\": 5\n+ }\",\n  ]\n\n\nNumber of calls: 1\n"],"location":{"line":383,"column":34}},{"ancestorTitles":["","CostManager","error handling"],"fullName":" CostManager error handling should handle missing usage tracking data","status":"failed","title":"should handle missing usage tracking data","duration":0,"failureMessages":["this.currentUsage.filter is not a function"],"location":{"line":158,"column":42}},{"ancestorTitles":["","CostManager","concurrent access"],"fullName":" CostManager concurrent access should handle concurrent operations safely","status":"failed","title":"should handle concurrent operations safely","duration":1,"failureMessages":["costManager.trackUsage is not a function"],"location":{"line":417,"column":21}}],"startTime":1750461227524,"endTime":1750461227619,"status":"failed","message":"","name":"/Users/tmita/workspace/vibeflow/tests/unit/cost-manager.test.ts"},{"assertionResults":[{"ancestorTitles":["","EnhancedBoundaryAgent","constructor"],"fullName":" EnhancedBoundaryAgent constructor should initialize with project path","status":"failed","title":"should initialize with project path","duration":16,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","EnhancedBoundaryAgent","constructor"],"fullName":" EnhancedBoundaryAgent constructor should accept optional config and user boundaries","status":"failed","title":"should accept optional config and user boundaries","duration":1,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","EnhancedBoundaryAgent","analyzeBoundaries"],"fullName":" EnhancedBoundaryAgent analyzeBoundaries should discover boundaries from Go code","status":"failed","title":"should discover boundaries from Go code","duration":2,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","EnhancedBoundaryAgent","analyzeBoundaries"],"fullName":" EnhancedBoundaryAgent analyzeBoundaries should generate confidence metrics","status":"failed","title":"should generate confidence metrics","duration":1,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","EnhancedBoundaryAgent","analyzeBoundaries"],"fullName":" EnhancedBoundaryAgent analyzeBoundaries should discover domain-specific boundaries","status":"failed","title":"should discover domain-specific boundaries","duration":1,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","EnhancedBoundaryAgent","analyzeBoundaries"],"fullName":" EnhancedBoundaryAgent analyzeBoundaries should assign semantic keywords to boundaries","status":"failed","title":"should assign semantic keywords to boundaries","duration":1,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","EnhancedBoundaryAgent","analyzeBoundaries"],"fullName":" EnhancedBoundaryAgent analyzeBoundaries should generate recommendations","status":"failed","title":"should generate recommendations","duration":1,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","EnhancedBoundaryAgent","analyzeBoundaries"],"fullName":" EnhancedBoundaryAgent analyzeBoundaries should write output files","status":"failed","title":"should write output files","duration":2,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","EnhancedBoundaryAgent","error handling"],"fullName":" EnhancedBoundaryAgent error handling should handle file read errors gracefully","status":"failed","title":"should handle file read errors gracefully","duration":1,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","EnhancedBoundaryAgent","error handling"],"fullName":" EnhancedBoundaryAgent error handling should handle empty project directories","status":"failed","title":"should handle empty project directories","duration":1,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","EnhancedBoundaryAgent","error handling"],"fullName":" EnhancedBoundaryAgent error handling should handle non-source files gracefully","status":"failed","title":"should handle non-source files gracefully","duration":1,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","EnhancedBoundaryAgent","language detection"],"fullName":" EnhancedBoundaryAgent language detection should detect Go projects","status":"failed","title":"should detect Go projects","duration":1,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","EnhancedBoundaryAgent","language detection"],"fullName":" EnhancedBoundaryAgent language detection should detect TypeScript projects","status":"failed","title":"should detect TypeScript projects","duration":0,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","EnhancedBoundaryAgent","boundary merging"],"fullName":" EnhancedBoundaryAgent boundary merging should merge user-defined boundaries with auto-discovered ones","status":"failed","title":"should merge user-defined boundaries with auto-discovered ones","duration":0,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","EnhancedBoundaryAgent","confidence calculation"],"fullName":" EnhancedBoundaryAgent confidence calculation should calculate higher confidence for well-structured code","status":"failed","title":"should calculate higher confidence for well-structured code","duration":1,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","EnhancedBoundaryAgent","confidence calculation"],"fullName":" EnhancedBoundaryAgent confidence calculation should calculate lower confidence for mixed code","status":"failed","title":"should calculate lower confidence for mixed code","duration":0,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}}],"startTime":1750461228019,"endTime":1750461228053,"status":"failed","message":"","name":"/Users/tmita/workspace/vibeflow/tests/unit/enhanced-boundary-agent.test.ts"},{"assertionResults":[{"ancestorTitles":["","HybridRefactorAgent","constructor"],"fullName":" HybridRefactorAgent constructor should initialize with project path","status":"failed","title":"should initialize with project path","duration":13,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","HybridRefactorAgent","constructor"],"fullName":" HybridRefactorAgent constructor should detect AI availability","status":"failed","title":"should detect AI availability","duration":2,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","HybridRefactorAgent","estimateCost"],"fullName":" HybridRefactorAgent estimateCost should estimate cost for boundaries","status":"failed","title":"should estimate cost for boundaries","duration":1,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","HybridRefactorAgent","estimateCost"],"fullName":" HybridRefactorAgent estimateCost should provide detailed cost breakdown","status":"failed","title":"should provide detailed cost breakdown","duration":1,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","HybridRefactorAgent","estimateCost"],"fullName":" HybridRefactorAgent estimateCost should estimate different costs for different file sizes","status":"failed","title":"should estimate different costs for different file sizes","duration":1,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","HybridRefactorAgent","executeRefactoring"],"fullName":" HybridRefactorAgent executeRefactoring should execute refactoring in template mode","status":"failed","title":"should execute refactoring in template mode","duration":1,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","HybridRefactorAgent","executeRefactoring"],"fullName":" HybridRefactorAgent executeRefactoring should generate clean architecture structure","status":"failed","title":"should generate clean architecture structure","duration":1,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","HybridRefactorAgent","executeRefactoring"],"fullName":" HybridRefactorAgent executeRefactoring should generate tests for each layer","status":"failed","title":"should generate tests for each layer","duration":1,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","HybridRefactorAgent","executeRefactoring"],"fullName":" HybridRefactorAgent executeRefactoring should handle dry-run mode","status":"failed","title":"should handle dry-run mode","duration":1,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","HybridRefactorAgent","executeRefactoring"],"fullName":" HybridRefactorAgent executeRefactoring should apply changes when requested","status":"failed","title":"should apply changes when requested","duration":1,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","HybridRefactorAgent","template generation"],"fullName":" HybridRefactorAgent template generation should generate domain entities","status":"failed","title":"should generate domain entities","duration":1,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","HybridRefactorAgent","template generation"],"fullName":" HybridRefactorAgent template generation should generate usecase services","status":"failed","title":"should generate usecase services","duration":0,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","HybridRefactorAgent","template generation"],"fullName":" HybridRefactorAgent template generation should generate repository interfaces","status":"failed","title":"should generate repository interfaces","duration":1,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","HybridRefactorAgent","template generation"],"fullName":" HybridRefactorAgent template generation should generate HTTP handlers","status":"failed","title":"should generate HTTP handlers","duration":4,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","HybridRefactorAgent","AI enhancement"],"fullName":" HybridRefactorAgent AI enhancement should use AI when available","status":"failed","title":"should use AI when available","duration":1,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","HybridRefactorAgent","AI enhancement"],"fullName":" HybridRefactorAgent AI enhancement should fallback to templates when AI fails","status":"failed","title":"should fallback to templates when AI fails","duration":1,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","HybridRefactorAgent","validation"],"fullName":" HybridRefactorAgent validation should validate generated code","status":"failed","title":"should validate generated code","duration":1,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","HybridRefactorAgent","validation"],"fullName":" HybridRefactorAgent validation should handle compilation failures","status":"failed","title":"should handle compilation failures","duration":1,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","HybridRefactorAgent","error handling"],"fullName":" HybridRefactorAgent error handling should handle file read errors gracefully","status":"failed","title":"should handle file read errors gracefully","duration":1,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","HybridRefactorAgent","error handling"],"fullName":" HybridRefactorAgent error handling should handle empty boundaries array","status":"failed","title":"should handle empty boundaries array","duration":0,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","HybridRefactorAgent","error handling"],"fullName":" HybridRefactorAgent error handling should handle invalid project structure","status":"failed","title":"should handle invalid project structure","duration":2,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","HybridRefactorAgent","metrics collection"],"fullName":" HybridRefactorAgent metrics collection should collect transformation metrics","status":"failed","title":"should collect transformation metrics","duration":1,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}},{"ancestorTitles":["","HybridRefactorAgent","metrics collection"],"fullName":" HybridRefactorAgent metrics collection should track performance metrics","status":"failed","title":"should track performance metrics","duration":1,"failureMessages":["[vitest] No \"mkdirSync\" export is defined on the \"fs\" mock. Did you forget to return it from \"vi.mock\"?\nIf you need to partially mock a module, you can use \"importOriginal\" helper inside:\n"],"location":{"line":33,"column":12}}],"startTime":1750461227896,"endTime":1750461227938,"status":"failed","message":"","name":"/Users/tmita/workspace/vibeflow/tests/unit/hybrid-refactor-agent.test.ts"}]}